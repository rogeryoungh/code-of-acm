<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>题目跳转</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js"></script>
</head>

<body>
    <main class="flex-shrink-0">
        <div class="container">
            <div class="m-auto">
                <h1 class="mt-5 text-center">OJ 题目跳转</h1>
                <div class="input-group mb-3" style="margin-top: 50px;">
                    <span class="input-group-text" id="basic-addon3">题目编号</span>
                    <input type="text" class="form-control" id="keyword" aria-describedby="basic-addon3"
                        onkeydown="onKeyDown(event)">
                </div>
            </div>
        </div>
    </main>

    <script>
        function onKeyDown(event) {
            var e = event || window.event || arguments.callee.caller.arguments[0];
            if (e && e.keyCode == 13) {
                let k = document.getElementById("keyword").value;
                jump(k.toUpperCase().replaceAll(/\s/g, ""));
            }
        }

        function jump(keyword) {
            let url = "";
            let len = keyword.length;
            if (keyword.startsWith("P")) {
                url = "https://www.luogu.com.cn/problem/" + keyword;
            } else if (keyword.startsWith("HDU")) {
                url = "https://acm.hdu.edu.cn/showproblem.php?pid=" + keyword.substring(3);
            } else if (keyword.startsWith("HDOJ")) {
                url = "https://acm.hdu.edu.cn/showproblem.php?pid=" + keyword.substring(4);
            } else if (keyword.startsWith("CF")) {
                let end = keyword.substring(len - 1);
                if (/[A-Z]/.test(end)) {
                    // url = "https://codeforces.com/contest/" + keyword.substring(2, len - 1) + "/problem/" + end;
                    url = "https://codeforces.com/problemset/problem/" + keyword.substring(2, len - 1) + "/" + end;
                } else {
                    url = "https://codeforces.com/contest/" + keyword.substring(2);
                }
            }

            if (url !== "")
                window.open(url, '_blank');
        }

    </script>
</body>

</html>