<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>CF Round 706(Div 2) | Roger Young</title>
<meta name="keywords" content="" />
<meta name="description" content="D. Let&#39;s Go Hiking 两人在序列上移动，Qingshan 只能往值更高的地方走，Daniel 只能往低处走。两人不能重叠，求 Qingshan 中有多少可以赢的位置。
分析 其实我们只用关注上升和下降的序列有多长，而不必关心它们具体是几。
如果 Qingshan 选边界上的坡，或者不选在坡顶，那么 Daniel 可以紧挨着它，从而必输。
如果 Qingshan 不选最长的坡，则 Danniel 可以选最长的坡，从而必输。
如果最长的坡存在没有公共最高点的两个，Danniel 可以避开 Qingshan 选，从而必输。
剩下的情况只有两种：
最长的坡只有一个，Qingshan 只能选在此坡坡顶，Danniel 可以选在靠近坡底的地方，使得两人碰面，从而必输。 最长的坡有两个且有公共最高点，Qingshan 选在坡顶，则可以选择避开 Danniel 下坡，从而必胜。 附：代码，展开
E. Garden of the Sun 在棋盘的格子中有不连续的 X，请连接使得其满足如下条件
X 组成的图案是连通的。 X 组成的图案不存在环。 分析 X 不连续是一个比较强的性质。
构造类似 丰 字形的图案，横与横之间空两行，这样可以使得所有 X 都附在一条横上，且互相不连接。
接下来考虑如何把横连起来，可以发现只用在第一列、第二列中选一列进行连接即可。
附：代码，展开
F. BFS Trees 第一次补题补到 F 耶！什么时候才能在赛中做到 F 呢……
我们定义一个图上的生成树是以 $s$ 点为根的 BFS 树，当且仅当：对于任意的节点 $t$，$s\to t$ 在 BFS 树上的最短路等于图上的最短路。">
<meta name="author" content="rogeryoungh">
<link rel="canonical" href="https://acm.rogery.dev/post/2021-11/cf1496/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.516fb8b590ac7d538e32093f4a6811588662ee6b96d207ce1d68927839cf0186.css" integrity="sha256-UW&#43;4tZCsfVOOMgk/SmgRWIZi7muW0gfOHWiSeDnPAYY=" rel="preload stylesheet" as="style">
<link rel="preload" href="https://blog.rogery.dev/avatar.png" as="image">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.db5735216fdebd5ecb898cb813197906245b705e5f893e803582740b5cc873be.js" integrity="sha256-21c1IW/evV7LiYy4Exl5BiRbcF5fiT6ANYJ0C1zIc74="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://acm.rogery.dev/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://acm.rogery.dev/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://acm.rogery.dev/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://acm.rogery.dev/apple-touch-icon.png">
<link rel="mask-icon" href="https://acm.rogery.dev/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.104.3" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js"
    onload="renderMathInElement(document.body);"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
            
            
            delimiters: [
                { left: '$$', right: '$$', display: true },
                { left: '$', right: '$', display: false },
                { left: '\\(', right: '\\)', display: false },
                { left: '\\[', right: '\\]', display: true }
            ],
            
            throwOnError: false
        });
    });
</script>




<meta property="og:title" content="CF Round 706(Div 2)" />
<meta property="og:description" content="D. Let&#39;s Go Hiking 两人在序列上移动，Qingshan 只能往值更高的地方走，Daniel 只能往低处走。两人不能重叠，求 Qingshan 中有多少可以赢的位置。
分析 其实我们只用关注上升和下降的序列有多长，而不必关心它们具体是几。
如果 Qingshan 选边界上的坡，或者不选在坡顶，那么 Daniel 可以紧挨着它，从而必输。
如果 Qingshan 不选最长的坡，则 Danniel 可以选最长的坡，从而必输。
如果最长的坡存在没有公共最高点的两个，Danniel 可以避开 Qingshan 选，从而必输。
剩下的情况只有两种：
最长的坡只有一个，Qingshan 只能选在此坡坡顶，Danniel 可以选在靠近坡底的地方，使得两人碰面，从而必输。 最长的坡有两个且有公共最高点，Qingshan 选在坡顶，则可以选择避开 Danniel 下坡，从而必胜。 附：代码，展开
E. Garden of the Sun 在棋盘的格子中有不连续的 X，请连接使得其满足如下条件
X 组成的图案是连通的。 X 组成的图案不存在环。 分析 X 不连续是一个比较强的性质。
构造类似 丰 字形的图案，横与横之间空两行，这样可以使得所有 X 都附在一条横上，且互相不连接。
接下来考虑如何把横连起来，可以发现只用在第一列、第二列中选一列进行连接即可。
附：代码，展开
F. BFS Trees 第一次补题补到 F 耶！什么时候才能在赛中做到 F 呢……
我们定义一个图上的生成树是以 $s$ 点为根的 BFS 树，当且仅当：对于任意的节点 $t$，$s\to t$ 在 BFS 树上的最短路等于图上的最短路。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://acm.rogery.dev/post/2021-11/cf1496/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-11-11T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-11-11T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CF Round 706(Div 2)"/>
<meta name="twitter:description" content="D. Let&#39;s Go Hiking 两人在序列上移动，Qingshan 只能往值更高的地方走，Daniel 只能往低处走。两人不能重叠，求 Qingshan 中有多少可以赢的位置。
分析 其实我们只用关注上升和下降的序列有多长，而不必关心它们具体是几。
如果 Qingshan 选边界上的坡，或者不选在坡顶，那么 Daniel 可以紧挨着它，从而必输。
如果 Qingshan 不选最长的坡，则 Danniel 可以选最长的坡，从而必输。
如果最长的坡存在没有公共最高点的两个，Danniel 可以避开 Qingshan 选，从而必输。
剩下的情况只有两种：
最长的坡只有一个，Qingshan 只能选在此坡坡顶，Danniel 可以选在靠近坡底的地方，使得两人碰面，从而必输。 最长的坡有两个且有公共最高点，Qingshan 选在坡顶，则可以选择避开 Danniel 下坡，从而必胜。 附：代码，展开
E. Garden of the Sun 在棋盘的格子中有不连续的 X，请连接使得其满足如下条件
X 组成的图案是连通的。 X 组成的图案不存在环。 分析 X 不连续是一个比较强的性质。
构造类似 丰 字形的图案，横与横之间空两行，这样可以使得所有 X 都附在一条横上，且互相不连接。
接下来考虑如何把横连起来，可以发现只用在第一列、第二列中选一列进行连接即可。
附：代码，展开
F. BFS Trees 第一次补题补到 F 耶！什么时候才能在赛中做到 F 呢……
我们定义一个图上的生成树是以 $s$ 点为根的 BFS 树，当且仅当：对于任意的节点 $t$，$s\to t$ 在 BFS 树上的最短路等于图上的最短路。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://acm.rogery.dev/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "CF Round 706(Div 2)",
      "item": "https://acm.rogery.dev/post/2021-11/cf1496/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CF Round 706(Div 2)",
  "name": "CF Round 706(Div 2)",
  "description": "D. Let's Go Hiking 两人在序列上移动，Qingshan 只能往值更高的地方走，Daniel 只能往低处走。两人不能重叠，求 Qingshan 中有多少可以赢的位置。\n分析 其实我们只用关注上升和下降的序列有多长，而不必关心它们具体是几。\n如果 Qingshan 选边界上的坡，或者不选在坡顶，那么 Daniel 可以紧挨着它，从而必输。\n如果 Qingshan 不选最长的坡，则 Danniel 可以选最长的坡，从而必输。\n如果最长的坡存在没有公共最高点的两个，Danniel 可以避开 Qingshan 选，从而必输。\n剩下的情况只有两种：\n最长的坡只有一个，Qingshan 只能选在此坡坡顶，Danniel 可以选在靠近坡底的地方，使得两人碰面，从而必输。 最长的坡有两个且有公共最高点，Qingshan 选在坡顶，则可以选择避开 Danniel 下坡，从而必胜。 附：代码，展开\nE. Garden of the Sun 在棋盘的格子中有不连续的 X，请连接使得其满足如下条件\nX 组成的图案是连通的。 X 组成的图案不存在环。 分析 X 不连续是一个比较强的性质。\n构造类似 丰 字形的图案，横与横之间空两行，这样可以使得所有 X 都附在一条横上，且互相不连接。\n接下来考虑如何把横连起来，可以发现只用在第一列、第二列中选一列进行连接即可。\n附：代码，展开\nF. BFS Trees 第一次补题补到 F 耶！什么时候才能在赛中做到 F 呢……\n我们定义一个图上的生成树是以 $s$ 点为根的 BFS 树，当且仅当：对于任意的节点 $t$，$s\\to t$ 在 BFS 树上的最短路等于图上的最短路。",
  "keywords": [
    
  ],
  "articleBody": "D. Let's Go Hiking 两人在序列上移动，Qingshan 只能往值更高的地方走，Daniel 只能往低处走。两人不能重叠，求 Qingshan 中有多少可以赢的位置。\n分析 其实我们只用关注上升和下降的序列有多长，而不必关心它们具体是几。\n如果 Qingshan 选边界上的坡，或者不选在坡顶，那么 Daniel 可以紧挨着它，从而必输。\n如果 Qingshan 不选最长的坡，则 Danniel 可以选最长的坡，从而必输。\n如果最长的坡存在没有公共最高点的两个，Danniel 可以避开 Qingshan 选，从而必输。\n剩下的情况只有两种：\n最长的坡只有一个，Qingshan 只能选在此坡坡顶，Danniel 可以选在靠近坡底的地方，使得两人碰面，从而必输。 最长的坡有两个且有公共最高点，Qingshan 选在坡顶，则可以选择避开 Danniel 下坡，从而必胜。 附：代码，展开\nE. Garden of the Sun 在棋盘的格子中有不连续的 X，请连接使得其满足如下条件\nX 组成的图案是连通的。 X 组成的图案不存在环。 分析 X 不连续是一个比较强的性质。\n构造类似 丰 字形的图案，横与横之间空两行，这样可以使得所有 X 都附在一条横上，且互相不连接。\n接下来考虑如何把横连起来，可以发现只用在第一列、第二列中选一列进行连接即可。\n附：代码，展开\nF. BFS Trees 第一次补题补到 F 耶！什么时候才能在赛中做到 F 呢……\n我们定义一个图上的生成树是以 $s$ 点为根的 BFS 树，当且仅当：对于任意的节点 $t$，$s\\to t$ 在 BFS 树上的最短路等于图上的最短路。\n定义 $f(i,j)$ 为根可以在 $i$ 且可以在 $j$ 的 BFS 树的个数，求所有的 $f(i,j) \\bmod P$。\n分析 题目有点绕，要好好的读一读。\n注意到一个关键点：若 $i \\to j$ 最短路有两条，而在生成树中只能有一条，则这些被断掉的节点到 $i,j$ 的最短路一定不能同时取到最小值，故答案不存在，即 $f(i,j) = 0$。\n因此 $i \\to j$ 只能有一条路。想象 $i$ 侧剩余的点按照到 $i$ 的距离分成层级，每个点 $k$ 满足 BFS 树条件的接入方式就是连到更近一层的点 $e$，即判据为\n$$ dis(i, e) + 1 = dis(i, k)\\ \\text{且}\\ dis(j, e) + 1 = dis(j, k) $$\n注意到每次接入是独立的，答案即用乘法合并。\n至于判最短路的条数，注意到 $dis(i,k) + dis(k,j) = dis(i,j)$ 即意味着 $k$ 在 $i \\to j$ 的最短路上，计算满足条件的点数是否是 $dis(i,j) + 1$ 即可。\nfor (int i = 1; i \u003c= n; i++) { for (int j = i; j \u003c= n; j++) { ll tans = 1, cnt = 0; for (int k = 1; k \u003c= n; k++) { if (f[i][k] + f[j][k] == f[i][j]) { cnt++; } else { int s = 0; for (auto e : G[k]) { s += f[i][e] + 1 == f[i][k] \u0026\u0026 f[e][j] + 1 == f[k][j]; } tans = tans * s % P; } } if (cnt != f[i][j] + 1) { tans = 0; } ans[i][j] = ans[j][i] = tans; } } 附：代码，展开\n",
  "wordCount" : "246",
  "inLanguage": "en",
  "datePublished": "2021-11-11T00:00:00Z",
  "dateModified": "2021-11-11T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "rogeryoungh"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://acm.rogery.dev/post/2021-11/cf1496/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Roger Young",
    "logo": {
      "@type": "ImageObject",
      "url": "https://acm.rogery.dev/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-font") === "serif") {
        document.body.classList.add('serif');
    }

</script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://acm.rogery.dev" accesskey="h" title="Roger Young (Alt + H)">Roger Young</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <button id="font-toggle" accesskey="t" title="(Alt + T)">A</button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://acm.rogery.dev/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://acm.rogery.dev/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://acm.rogery.dev/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://acm.rogery.dev/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      CF Round 706(Div 2)
    </h1>
    <div class="post-meta">November 11, 2021&nbsp;·&nbsp;rogeryoungh
</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#d-lets-go-hiking" aria-label="D. Let&#39;s Go Hiking">D. Let's Go Hiking</a><ul>
                        
                <li>
                    <a href="#%e5%88%86%e6%9e%90" aria-label="分析">分析</a></li></ul>
                </li>
                <li>
                    <a href="#e-garden-of-the-sun" aria-label="E. Garden of the Sun">E. Garden of the Sun</a><ul>
                        
                <li>
                    <a href="#%e5%88%86%e6%9e%90-1" aria-label="分析">分析</a></li></ul>
                </li>
                <li>
                    <a href="#f-bfs-trees" aria-label="F. BFS Trees">F. BFS Trees</a><ul>
                        
                <li>
                    <a href="#%e5%88%86%e6%9e%90-2" aria-label="分析">分析</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="d-lets-go-hiking">D. Let's Go Hiking<a hidden class="anchor" aria-hidden="true" href="#d-lets-go-hiking">#</a></h2>
<p>两人在序列上移动，Qingshan 只能往值更高的地方走，Daniel 只能往低处走。两人不能重叠，求 Qingshan 中有多少可以赢的位置。</p>
<h3 id="分析">分析<a hidden class="anchor" aria-hidden="true" href="#分析">#</a></h3>
<p>其实我们只用关注上升和下降的序列有多长，而不必关心它们具体是几。</p>
<p>如果 Qingshan 选边界上的坡，或者不选在坡顶，那么 Daniel 可以紧挨着它，从而必输。</p>
<p>如果 Qingshan 不选最长的坡，则 Danniel 可以选最长的坡，从而必输。</p>
<p>如果最长的坡存在没有公共最高点的两个，Danniel 可以避开 Qingshan 选，从而必输。</p>
<p>剩下的情况只有两种：</p>
<ul>
<li>最长的坡只有一个，Qingshan 只能选在此坡坡顶，Danniel 可以选在靠近坡底的地方，使得两人碰面，从而必输。</li>
<li>最长的坡有两个且有公共最高点，Qingshan 选在坡顶，则可以选择避开 Danniel 下坡，从而必胜。</li>
</ul>
<p>附：<a href="../../other/code/?url=roger://post/2021-11%2fcodes%2fCF1496D.cpp">代码</a>，<a href="../../other/code/?url=roger://post/2021-11%2fcodes%2fCF1496D.cpp.cpp">展开</a></p>
<h2 id="e-garden-of-the-sun">E. Garden of the Sun<a hidden class="anchor" aria-hidden="true" href="#e-garden-of-the-sun">#</a></h2>
<p>在棋盘的格子中有不连续的 <code>X</code>，请连接使得其满足如下条件</p>
<ul>
<li><code>X</code> 组成的图案是连通的。</li>
<li><code>X</code> 组成的图案不存在环。</li>
</ul>
<h3 id="分析-1">分析<a hidden class="anchor" aria-hidden="true" href="#分析-1">#</a></h3>
<p><code>X</code> 不连续是一个比较强的性质。</p>
<p>构造类似 <code>丰</code> 字形的图案，横与横之间空两行，这样可以使得所有 <code>X</code> 都附在一条横上，且互相不连接。</p>
<p>接下来考虑如何把横连起来，可以发现只用在第一列、第二列中选一列进行连接即可。</p>
<p>附：<a href="../../other/code/?url=roger://post/2021-11%2fcodes%2fCF1496E.cpp">代码</a>，<a href="../../other/code/?url=roger://post/2021-11%2fcodes%2fCF1496E.cpp.cpp">展开</a></p>
<h2 id="f-bfs-trees">F. BFS Trees<a hidden class="anchor" aria-hidden="true" href="#f-bfs-trees">#</a></h2>
<blockquote>
<p>第一次补题补到 F 耶！什么时候才能在赛中做到 F 呢……</p>
</blockquote>
<p>我们定义一个图上的生成树是以 $s$ 点为根的 BFS 树，当且仅当：对于任意的节点 $t$，$s\to t$ 在 BFS 树上的最短路等于图上的最短路。</p>
<p>定义 $f(i,j)$ 为根可以在 $i$ 且可以在 $j$ 的 BFS 树的个数，求所有的 $f(i,j) \bmod P$。</p>
<h3 id="分析-2">分析<a hidden class="anchor" aria-hidden="true" href="#分析-2">#</a></h3>
<p>题目有点绕，要好好的读一读。</p>
<p>注意到一个关键点：若 $i \to j$ 最短路有两条，而在生成树中只能有一条，则这些被断掉的节点到 $i,j$ 的最短路一定不能同时取到最小值，故答案不存在，即 $f(i,j) = 0$。</p>
<p>因此 $i \to j$ 只能有一条路。想象 $i$ 侧剩余的点按照到 $i$ 的距离分成层级，每个点 $k$ 满足 BFS 树条件的接入方式就是连到更近一层的点 $e$，即判据为</p>
<p>$$
dis(i, e) + 1 = dis(i, k)\ \text{且}\ dis(j, e) + 1 = dis(j, k)
$$</p>
<p>注意到每次接入是独立的，答案即用乘法合并。</p>
<p>至于判最短路的条数，注意到 $dis(i,k) + dis(k,j) = dis(i,j)$ 即意味着 $k$ 在 $i \to j$ 的最短路上，计算满足条件的点数是否是 $dis(i,j) + 1$ 即可。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="n">ll</span> <span class="n">tans</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="n">cnt</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">				<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">e</span> <span class="p">:</span> <span class="n">G</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">					<span class="n">s</span> <span class="o">+=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">e</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">f</span><span class="p">[</span><span class="n">e</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">f</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">				<span class="n">tans</span> <span class="o">=</span> <span class="n">tans</span> <span class="o">*</span> <span class="n">s</span> <span class="o">%</span> <span class="n">P</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="p">(</span><span class="n">cnt</span> <span class="o">!=</span> <span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="n">tans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">ans</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">tans</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>附：<a href="../../other/code/?url=roger://post/2021-11%2fcodes%2fCF1496F.cpp">代码</a>，<a href="../../other/code/?url=roger://post/2021-11%2fcodes%2fCF1496F.cpp.cpp">展开</a></p>


  </div>
  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://acm.rogery.dev/post/2022-01/hj1/">
    <span class="title">« Prev Page</span>
    <br>
    <span>ZAFU 2022.01.18 个人赛题解</span>
  </a>
  <a class="next" href="https://acm.rogery.dev/post/other/log2021/">
    <span class="title">Next Page »</span>
    <br>
    <span>2021 年刷题日志</span>
  </a>
</nav>
<blockquote>
    <p class="copyright-item">
        本文作者： rogeryoungh。
        许可协议：<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank">CC BY-SA 4.0</a>。
        转载请署名！
    </p>
    <p class="copyright-item">
        撰写时间：2021-11-11，
        <a href="https://github.com/rogeryoungh/code-of-acm/#/commits/main/content/post/2021-11/CF1496.md" target="_blank">更新历史</a>。
    </p>
</blockquote>
  </footer><div id="vcomments"></div>
<script src='//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js'></script>
<script type="text/javascript">
    new Valine({
        el: '#vcomments',
        appId: 'fKamuLtYmV8QSg2WmPMXbsbT-gzGzoHsz',
        appKey: 'xRU1tcJiz1qbaEMD5aRkPzXk',
        avatar: 'mp',
        placeholder: '说点什么吧...',
        visitor: 'false'
    });
</script>
</article>
    </main>
    <footer class="footer">
    <span>© 2021 <a href="https://acm.rogery.dev">Roger Young</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" id="gototop" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })
    document.getElementById("font-toggle").addEventListener("click", () => {
        if (document.body.className.includes("serif")) {
            document.body.classList.remove('serif');
            localStorage.setItem("pref-font", 'sans');
        } else {
            document.body.classList.add('serif');
            localStorage.setItem("pref-font", 'serif');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script></body>

</html>
